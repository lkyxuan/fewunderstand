name: Notify Dev Branch Update

on:
  push:
    branches:
      - dev

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Lark Notification
        run: |
          curl -X POST "https://open.larksuite.com/open-apis/bot/v2/hook/9a925d0c-d4d6-4107-90d1-e9a42e8f0111" \
            -H "Content-Type: application/json" \
            -d '{
              "msg_type": "interactive",
              "card": {
                "header": {
                  "title": {
                    "tag": "plain_text",
                    "content": "ğŸš€ Dev åˆ†æ”¯å·²æ›´æ–°"
                  },
                  "template": "blue"
                },
                "elements": [
                  {
                    "tag": "div",
                    "text": {
                      "tag": "lark_md",
                      "content": "**ä»“åº“**: ${{ github.repository }}\n**åˆ†æ”¯**: dev\n**æäº¤è€…**: ${{ github.actor }}\n**æäº¤ä¿¡æ¯**: ${{ github.event.head_commit.message }}"
                    }
                  },
                  {
                    "tag": "action",
                    "actions": [
                      {
                        "tag": "button",
                        "text": {
                          "tag": "plain_text",
                          "content": "æŸ¥çœ‹æäº¤"
                        },
                        "type": "primary",
                        "url": "${{ github.event.head_commit.url }}"
                      }
                    ]
                  }
                ]
              }
            }'
